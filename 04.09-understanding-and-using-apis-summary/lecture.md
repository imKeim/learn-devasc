<!-- 4.9.1 -->
## Что я узнал в этом модуле?

### Представляем API

Интерфейс прикладного программирования (API) определяет способы взаимодействия пользователей, разработчиков и других приложений с компонентами приложения. API может использовать обычные веб-взаимодействия или протоколы связи, а также может использовать свои собственные проприетарные стандарты. Некоторые варианты использования - это задачи автоматизации, интеграция данных и функциональность. Большинство современных API-интерфейсов встроены в продукт. Эти API-интерфейсы обычно тщательно тестируются, являются надежными, а иногда даже используются самим продуктом.

### Стили дизайна API

API-интерфейсы могут доставляться синхронно или асинхронно. Синхронные API отвечают на запрос напрямую, обычно немедленно предоставляя данные (или другой соответствующий ответ). Асинхронные API предоставляют ответ, означающий, что запрос был получен, но в этом ответе нет фактических данных. Сервер обрабатывает запрос, что может занять некоторое время, и отправляет уведомление (или запускает обратный вызов) с данными после того, как запрос был обработан. Затем клиент может действовать с этими возвращенными данными.

### Архитектурные стили API

Три самых популярных типа архитектурных стилей API - это RPC, SOAP и REST.

Удаленный вызов процедур (RPC) - это модель запроса-ответа, которая позволяет приложению (действующему как клиент) выполнять вызов процедуры к другому приложению (действующему как сервер). «Серверное» приложение обычно находится в другой системе в сети.

Протокол простого доступа к объектам (SOAP) - это протокол обмена сообщениями. Он используется для связи между приложениями, которые могут быть на разных платформах или построены с использованием разных языков программирования. Это протокол на основе XML, который обычно используется с транспортом протокола передачи гипертекста (HTTP), но может применяться и к другим протоколам. SOAP является независимым, расширяемым и нейтральным.

REpresentational State Transfer (REST) - это архитектурный стиль, созданный как гибридный стиль, производный от нескольких сетевых архитектурных стилей, которые объединены с дополнительными ограничениями, которые определяют единый интерфейс соединителя. К элементам в архитектуре применяются шесть ограничений: клиент-сервер, без сохранения состояния, кэш, унифицированный интерфейс, многоуровневая система и код по запросу. Эти шесть ограничений могут быть применены к любому протоколу, и когда они применяются, вы часто слышите, что это RESTful.

### Введение в REST API

API веб-службы REST (REST API) - это программный интерфейс, который обменивается данными по HTTP, соблюдая принципы архитектурного стиля REST. Запросы REST API - это, по сути, HTTP-запросы, которые следуют принципам REST. Эти запросы позволяют приложению (клиенту) попросить сервер выполнить функцию. Ответы REST API по сути являются HTTP-ответами. Эти ответы сообщают результаты HTTP-запроса клиента. Ответ может содержать запрошенные данные, означать, что сервер получил свой запрос, или даже информировать клиента о том, что с его запросом возникла проблема. Диаграммы последовательности используются для объяснения последовательности обменов или событий. Они предоставляют сценарий упорядоченного набора событий. Их также называют диаграммами событий.

### Аутентификация в REST API

По соображениям безопасности большинство REST API требует аутентификации, чтобы случайные пользователи не могли создавать, обновлять или удалять информацию неправильно или злонамеренно, а также получать доступ к информации, которая не должна быть общедоступной. Без аутентификации REST API позволяет любому получить доступ к функциям и системным службам, которые были представлены через интерфейс. Аутентификация - это акт проверки личности пользователя. Пользователь доказывает, что они такие, о которых говорят. Авторизация - это подтверждение пользователем того, что у него есть разрешения на выполнение запрошенного действия с этим ресурсом. Общие типы механизмов аутентификации включают в себя базовый, носитель и API-ключ. Открытая авторизация, также известная как OAuth, сочетает аутентификацию с авторизацией.

### Пределы скорости API

Использование ограничения скорости API - это способ для веб-службы контролировать количество запросов, которые пользователь или приложение может сделать за определенную единицу времени. Общие алгоритмы ограничения скорости включают в себя: дырявое ведро, ведро токенов, счетчик фиксированного окна и счетчик скользящего окна. Многие API, ограничивающие скорость, добавляют подробности об ограничении скорости в заголовок ответа. Поскольку стандарта нет, пара "ключ-значение", используемая в заголовке, может отличаться в зависимости от API. Вот некоторые часто используемые ключи:

● **X-RateLimit-Limit**: максимальное количество запросов, которое может быть выполнено за указанную единицу времени.
● **X-RateLimit-Remaining**: количество оставшихся запросов, которые запрашивающая сторона может сделать в текущем окне ограничения скорости.
● **X-RateLimit-Reset**: время сброса окна ограничения скорости.

Когда лимит скорости превышен, сервер автоматически отклоняет запрос и отправляет ответ HTTP, информирующий пользователя. Кроме того, часто в ответ, содержащий ошибку «превышен предел скорости», также содержится значимый код состояния HTTP.

### Работа с Webhooks

Веб-перехватчик - это обратный вызов HTTP или HTTP POST для указанного URL-адреса, который уведомляет ваше приложение о том, что в одном из ваших ресурсов на платформе произошло определенное действие или «событие». Веб-перехватчики позволяют приложениям получать данные в реальном времени, потому что они запускаются определенными действиями или событиями. С помощью веб-перехватчиков приложения становятся более эффективными, поскольку им больше не требуется механизм опроса. Чтобы получать уведомление от поставщика веб-перехватчиков, приложение должно работать постоянно, чтобы получать запросы HTTP POST, и оно должно зарегистрировать URI в поставщике веб-перехватчиков, чтобы провайдер знал, куда отправлять уведомление при возникновении целевых событий. В дополнение к этим двум требованиям приложение должно обрабатывать входящие уведомления от сервера веб-перехватчиков.

### Устранение неполадок вызовов API

Перед тем как приступить к устранению неполадок, убедитесь, что у вас есть справочное руководство по API и информация об аутентификации API.

Неверно, что каждый запрос, отправленный на сервер REST API, будет возвращать ответ с кодом состояния. Хотя можно было ожидать, что вы всегда будете получать код состояния HTTP, такой как 2xx, 4xx и 5xx, во многих случаях сервер API не может быть достигнут или не отвечает. В этих сценариях вы не получите код состояния HTTP, потому что сервер API не может отправить ответ.

Хотя неотвечающий сервер может быть большой проблемой, основную причину отсутствия ответа можно легко определить. Обычно вы можете определить, что пошло не так, по сообщениям об ошибках, полученным в результате запроса. Это может быть ошибка на стороне клиента, ошибка пользователя, неправильный URI, неправильный домен, проблема с подключением, недопустимый сертификат, ошибка на стороне сервера или проблема связи между сервером и клиентом. Как сузить круг вопросов? Правильно интерпретируя коды состояния. Коды 4xx - это ошибки на стороне клиента, а коды 5xx - ошибки на стороне сервера.

<!-- 4.9.2 -->
## Лабораторная работа - Интеграция REST API с Python

В этой лабораторной работе вы создадите приложение, которое извлекает данные JSON из MapQuest Directions API, анализирует данные и форматирует их для вывода пользователю. Вы будете использовать запрос GET Route из API MapQuest Directions.

Вы выполните следующие задачи:

* Часть 1. Запуск виртуальной машины DEVASC
* Часть 2: Демонстрация приложения MapQuest Directions
* Часть 3. Получите ключ API MapQuest
* Часть 4: Создание базового приложения MapQuest Direction
* Часть 5: Обновление приложения MapQuest Directions с дополнительными функциями
* Часть 6: Проверка полной функциональности приложения

Интегрируйте REST API в приложение Python

<!-- 4.9.3 -->
<!—quiz -->
